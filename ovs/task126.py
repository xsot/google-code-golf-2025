p=lambda a:a[:-1]+[[4*(0<sum(c)in c)for c in zip(*a)]]

##

p=lambda g:g[:-1]+[[1//r.count(max(r))*4for r in zip(*g)]]
