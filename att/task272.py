p=lambda a,n=7:-n*a or[*map(lambda*b,d=0:[2*(d*(d:=c)>0)or c-(c>n)for c in b][::-1],*p(a,n-1))]

##
P=[[0]*9]
p=eval('lambda a:[[a[1][1]>>1-any(sum(a,())[1::2])'+'for*a,in map(zip,P+a,a,a[1:]+P)]'*2)